!function(n,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports):"function"==typeof define&&define.amd?define(["exports"],r):(n=n||self,r(n.d3={}))}(this,function(n){"use strict";function r(n,r,t,e){n=n.filter(function(n,e){var u=r(n,e),o=t(n,e);return null!=u&&isFinite(u)&&null!=o&&isFinite(o)}),e&&n.sort(function(n,t){return r(n)-r(t)});for(var u,o,a,i=n.length,f=new Float64Array(i),c=new Float64Array(i),v=0,h=0,l=0;l<i;)a=n[l],f[l]=u=+r(a,l,n),c[l]=o=+t(a,l,n),++l,v+=(u-v)/l,h+=(o-h)/l;for(var l=0;l<i;++l)f[l]-=v,c[l]-=h;return[f,c,v,h]}function t(n,r,t,e){for(var u=0,o=0;o<n.length;o++){var a=n[o],i=+r(a,o,n),f=+t(a,o,n);null!=i&&isFinite(i)&&null!=f&&isFinite(f)&&e(i,f,u++)}}function e(n,r,e,u,o){var a=0,i=0;return t(n,r,e,function(n,r){var t=r-o(n),e=r-u;a+=t*t,i+=e*e}),1-a/i}function u(n){return Math.atan2(n[1][1]-n[0][1],n[1][0]-n[0][0])*(180/Math.PI)}function o(n){return[(n[0][0]+n[1][0])/2,(n[0][1]+n[1][1])/2]}function a(n,r,t){function e(n){return[n,t(n)]}for(var a=Math.log(r-n)*Math.LOG10E+1|0,i=Math.pow(10,-a/2-1),f=[e(n),e(r)],c=0;function(n){c++;for(var r=n.length,t=!1,a=0;a<r-1;a++){var f=n[a],v=n[a+1],h=o([f,v]),l=e(h[0]),g=u([f,h]),s=u([f,l]);Math.abs(g-s)>i&&(n.splice(a+1,0,l),t=!0)}return t}(f)&&c<1e4;);return f}function i(n,r,t,e){var u=e-n*n,o=Math.abs(u)<1e-24?0:(t-n*r)/u;return[r-o*n,o]}function f(){var n,r=function(n){return n[1]},u=function(n){return n[0]},o=function(o){var f=0,c=0,v=0,h=0,l=0,g=0,s=n?+n[0]:1/0,d=n?+n[1]:-1/0;t(o,u,r,function(r,t){var e=Math.log(t),u=r*t;++f,c+=(t-c)/f,h+=(u-h)/f,g+=(r*u-g)/f,v+=(t*e-v)/f,l+=(u*e-l)/f,n||(r<s&&(s=r),r>d&&(d=r))});var p=i(h/c,v/c,l/c,g/c),M=p[0],y=p[1];M=Math.exp(M);var b=function(n){return M*Math.exp(y*n)},x=a(s,d,b);return x.a=M,x.b=y,x.predict=b,x.rSquared=e(o,u,r,c,b),x};return o.domain=function(r){return arguments.length?(n=r,o):n},o.x=function(n){return arguments.length?(u=n,o):u},o.y=function(n){return arguments.length?(r=n,o):r},o}function c(){var n,r=function(n){return n[0]},u=function(n){return n[1]},o=function(o){var a=0,f=0,c=0,v=0,h=0,l=n?+n[0]:1/0,g=n?+n[1]:-1/0;t(o,r,u,function(r,t){++a,f+=(r-f)/a,c+=(t-c)/a,v+=(r*t-v)/a,h+=(r*r-h)/a,n||(r<l&&(l=r),r>g&&(g=r))});var s=i(f,c,v,h),d=s[0],p=s[1],M=function(n){return p*n+d},y=[[l,M(l)],[g,M(g)]];return y.a=p,y.b=d,y.predict=M,y.rSquared=e(o,r,u,c,M),y};return o.domain=function(r){return arguments.length?(n=r,o):n},o.x=function(n){return arguments.length?(r=n,o):r},o.y=function(n){return arguments.length?(u=n,o):u},o}function v(n){n.sort(function(n,r){return n-r});var r=n.length/2;return r%1==0?(n[r-1]+n[r])/2:n[Math.floor(r)]}function h(){var n=function(n){return n[0]},t=function(n){return n[1]},e=.3,u=function(u){for(var o=r(u,function(r){return n(r)},function(n){return t(n)},!0),a=o[0],f=o[1],c=o[2],h=o[3],d=a.length,p=Math.max(2,~~(e*d)),M=new Float64Array(d),y=new Float64Array(d),b=new Float64Array(d).fill(1),x=-1;++x<=m;){for(var w=[0,p-1],q=0;q<d;++q){for(var F=a[q],A=w[0],L=w[1],P=F-a[A]>a[L]-F?A:L,E=0,j=0,k=0,O=0,_=0,B=1/Math.abs(a[P]-F||1),C=A;C<=L;++C){var G=a[C],I=f[C],Q=l(Math.abs(F-G)*B)*b[C],z=G*Q;E+=Q,j+=z,k+=I*Q,O+=I*z,_+=G*z}var D=i(j/E,k/E,O/E,_/E),H=D[0],J=D[1];M[q]=H+J*F,y[q]=Math.abs(f[q]-M[q]),g(a,q+1,w)}if(x===m)break;var K=v(y);if(Math.abs(K)<S)break;for(var q=0,N=void 0,Q=void 0;q<d;++q)N=y[q]/(6*K),b[q]=N>=1?S:(Q=1-N*N)*Q}return s(a,M,c,h)};return u.bandwidth=function(n){return arguments.length?(e=n,u):e},u.x=function(r){return arguments.length?(n=r,u):n},u.y=function(n){return arguments.length?(t=n,u):t},u}function l(n){return(n=1-n*n*n)*n*n}function g(n,r,t){var e=n[r],u=t[0],o=t[1]+1;if(!(o>=n.length))for(;r>u&&n[o]-e<=e-n[u];)t[0]=++u,t[1]=o,++o}function s(n,r,t,e){for(var u,o=n.length,a=[],i=0,f=0,c=[];i<o;++i)u=n[i]+t,c[0]===u?c[1]+=(r[i]-c[1])/++f:(f=0,c[1]+=e,c=[u,r[i]],a.push(c));return c[1]+=e,a}function d(){var n,r=function(n){return n[0]},u=function(n){return n[1]},o=Math.E,f=function(f){var c=0,v=0,h=0,l=0,g=0,s=n?+n[0]:1/0,d=n?+n[1]:-1/0,p=Math.log(o);t(f,r,u,function(r,t){var e=Math.log(r)/p;++c,v+=(e-v)/c,h+=(t-h)/c,l+=(e*t-l)/c,g+=(e*e-g)/c,n||(r<s&&(s=r),r>d&&(d=r))});var M=i(v,h,l,g),y=M[0],b=M[1],x=function(n){return b*Math.log(n)/p+y},w=a(s,d,x);return w.a=b,w.b=y,w.predict=x,w.rSquared=e(f,r,u,h,x),w};return f.domain=function(r){return arguments.length?(n=r,f):n},f.x=function(n){return arguments.length?(r=n,f):r},f.y=function(n){return arguments.length?(u=n,f):u},f.base=function(n){return arguments.length?(o=n,f):o},f}function p(){var n,u=function(n){return n[0]},o=function(n){return n[1]},i=function(i){var f,c,v,h,l=r(i,function(n){return u(n)},function(n){return o(n)}),g=l[0],s=l[1],d=l[2],p=l[3],M=g.length,y=0,b=0,x=0,w=0,m=0;for(f=0;f<M;)c=g[f],v=s[f++],h=c*c,y+=(h-y)/f,b+=(h*c-b)/f,x+=(h*h-x)/f,w+=(c*v-w)/f,m+=(h*v-m)/f;var S=0,q=0,F=n?+n[0]:1/0,A=n?+n[1]:-1/0;t(i,u,o,function(r,t){q++,S+=(t-S)/q,n||(r<F&&(F=r),r>A&&(A=r))});var L=x-y*y,P=y*L-b*b,E=(m*y-w*b)/P,j=(w*L-m*b)/P,k=-E*y,O=function(n){var r=n-d;return E*r*r+j*r+k+p},_=a(F,A,O);return _.a=E,_.b=j-2*E*d,_.c=k-j*d+E*d*d+p,_.predict=O,_.rSquared=e(i,u,o,S,O),_};return i.domain=function(r){return arguments.length?(n=r,i):n},i.x=function(n){return arguments.length?(u=n,i):u},i.y=function(n){return arguments.length?(o=n,i):o},i}function M(){var n,u=function(n){return n[0]},o=function(n){return n[1]},i=3,f=function(f){if(1===i){var v=c().x(u).y(o).domain(n)(f),h=[v[0],v[1]];return h.coefficients=[v.b,v.a],h.predict=v.predict,h.rSquared=v.rSquared,h}if(2===i){var v=p().x(u).y(o).domain(n)(f),h=[v[0],v[1]];return h.coefficients=[v.c,v.b,v.a],h.predict=v.predict,h.rSquared=v.rSquared,h}var l=r(f,u,o),g=l[0],s=l[1],d=l[2],M=l[3],x=g.length,w=i+1,m=[],S=[],q=0,F=0,A=n?+n[0]:1/0,L=n?+n[1]:-1/0;t(f,u,o,function(r,t){F++,q+=(t-q)/F,n||(r<A&&(A=r),r>L&&(L=r))});for(var P=0;P<w;P++){for(var E=0,j=0;j<x;j++)E+=Math.pow(g[j],P)*s[j];m.push(E);for(var k=new Float64Array(w),O=0;O<w;O++){for(var _=0,j=0;j<x;j++)_+=Math.pow(g[j],P+O);k[O]=_}S.push(k)}S.push(new Float64Array(m));var B=b(S),C=function(n){for(var r=n-d,t=M+B[0],e=1;e<w;e++)t+=B[e]*Math.pow(r,e);return t},G=a(A,L,C);return G.coefficients=y(w,B,-d,M),G.predict=C,G.rSquared=e(f,u,o,q,C),G};return f.domain=function(r){return arguments.length?(n=r,f):n},f.x=function(n){return arguments.length?(u=n,f):u},f.y=function(n){return arguments.length?(o=n,f):o},f.order=function(n){return arguments.length?(i=n,f):i},f}function y(n,r,t,e){for(var u=new Array(n).fill(0),o=n-1;o>=0;--o){var a=r[o];u[o]+=a;for(var i=1,f=1;f<=o;++f)i*=(o+1-f)/f,u[o-f]+=a*Math.pow(t,f)*i}return u[0]+=e,u}function b(n){for(var r=n.length-1,t=new Array(r),e=0;e<r;e++){for(var u=e,o=e+1;o<r;o++)Math.abs(n[e][o])>Math.abs(n[e][u])&&(u=o);for(var a=e;a<r+1;a++){var i=n[a][e];n[a][e]=n[a][u],n[a][u]=i}for(var o=e+1;o<r;o++)for(var a=r;a>=e;a--)n[a][o]-=n[a][e]*n[e][o]/n[e][e]}for(var o=r-1;o>=0;o--){for(var i=0,a=o+1;a<r;a++)i+=n[a][o]*t[a];t[o]=(n[r][o]-i)/n[o][o]}return t}function x(){var n,r=function(n){return n[0]},u=function(n){return n[1]},o=function(o){var f=0,c=0,v=0,h=0,l=0,g=0,s=n?+n[0]:1/0,d=n?+n[1]:-1/0;t(o,r,u,function(r,t){var e=Math.log(r),u=Math.log(t);++f,c+=(e-c)/f,v+=(u-v)/f,h+=(e*u-h)/f,l+=(e*e-l)/f,g+=(t-g)/f,n||(r<s&&(s=r),r>d&&(d=r))});var p=i(c,v,h,l),M=p[0],y=p[1];M=Math.exp(M);var b=function(n){return M*Math.pow(n,y)},x=a(s,d,b);return x.a=M,x.b=y,x.predict=b,x.rSquared=e(o,r,u,g,b),x};return o.domain=function(r){return arguments.length?(n=r,o):n},o.x=function(n){return arguments.length?(r=n,o):r},o.y=function(n){return arguments.length?(u=n,o):u},o}function w(){function n(n){function c(n){return y+p/(1+Math.exp(-M*(n-b)))}var v=0,h=r?+r[0]:1/0,l=r?+r[1]:-1/0,g=1/0,s=-1/0,d=0;t(n,u,o,function(n,t){v++,d+=t,r||(n<h&&(h=n),n>l&&(l=n)),t<g&&(g=t),t>s&&(s=t)}),r||h!==1/0&&l!==-1/0||(h=0,l=1);for(var p=s-g,M=1,y=g,b=(h+l)/2,x=0;x<i;x++)!function(r){var e=0,a=0,i=0,h=0;t(n,u,o,function(n,r){var t=c(n),u=r-t,o=Math.exp(-M*(n-b)),f=1/(1+o),v=f,l=p*f*(1-f)*(n-b),g=-p*M*f*(1-f),s=-2*u;e+=s*v,a+=s*l,i+=1*s,h+=s*g}),p-=f*(e/v),M-=f*(a/v),y-=f*(i/v),b-=f*(h/v)}();var w=function(n){return y+p/(1+Math.exp(-M*(n-b)))},m=a(h,l,w);m.A=p,m.B=M,m.C=y,m.M=b,m.predict=w;var S=d/v;return m.rSquared=e(n,u,o,S,w),m}var r,u=function(n){return n[0]},o=function(n){return n[1]},i=2e3,f=1e-4;return n.domain=function(t){return arguments.length?(r=t,n):r},n.x=function(r){return arguments.length?(u=r,n):u},n.y=function(r){return arguments.length?(o=r,n):o},n}var m=2,S=1e-12;n.regressionExp=f,n.regressionLinear=c,n.regressionLoess=h,n.regressionLog=d,n.regressionPoly=M,n.regressionPow=x,n.regressionQuad=p,n.regressionSigmoidal=w,Object.defineProperty(n,"__esModule",{value:!0})});