!function(n,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports):"function"==typeof define&&define.amd?define(["exports"],r):(n=n||self,r(n.d3={}))}(this,function(n){"use strict";function r(n,r,t,e){n=n.filter(function(n,e){var u=r(n,e),o=t(n,e);return null!=u&&isFinite(u)&&null!=o&&isFinite(o)}),e&&n.sort(function(n,t){return r(n)-r(t)});for(var u,o,a,i=n.length,f=new Float64Array(i),c=new Float64Array(i),h=0,v=0,l=0;l<i;)a=n[l],f[l]=u=+r(a,l,n),c[l]=o=+t(a,l,n),++l,h+=(u-h)/l,v+=(o-v)/l;for(var l=0;l<i;++l)f[l]-=h,c[l]-=v;return[f,c,h,v]}function t(n,r,t,e){for(var u=0,o=0;o<n.length;o++){var a=n[o],i=+r(a,o,n),f=+t(a,o,n);null!=i&&isFinite(i)&&null!=f&&isFinite(f)&&e(i,f,u++)}}function e(n,r,e,u,o){var a=0,i=0;return t(n,r,e,function(n,r){var t=r-o(n),e=r-u;a+=t*t,i+=e*e}),1-a/i}function u(n){return Math.atan2(n[1][1]-n[0][1],n[1][0]-n[0][0])*(180/Math.PI)}function o(n){return[(n[0][0]+n[1][0])/2,(n[0][1]+n[1][1])/2]}function a(n,r,t){function e(n){return[n,t(n)]}for(var a=Math.log(r-n)*Math.LOG10E+1|0,i=Math.pow(10,-a/2-1),f=[e(n),e(r)],c=0;function(n){c++;for(var r=n.length,t=!1,a=0;a<r-1;a++){var f=n[a],h=n[a+1],v=o([f,h]),l=e(v[0]),g=u([f,v]),s=u([f,l]);Math.abs(g-s)>i&&(n.splice(a+1,0,l),t=!0)}return t}(f)&&c<1e4;);return f}function i(n,r,t,e){var u=e-n*n,o=Math.abs(u)<1e-24?0:(t-n*r)/u;return[r-o*n,o]}function f(){var n,r=function(n){return n[0]},u=function(n){return n[1]},o=function(o){var f=0,c=0,h=0,v=0,l=0,g=0,s=n?+n[0]:1/0,d=n?+n[1]:-1/0;t(o,r,u,function(r,t){var e=Math.log(t),u=r*t;++f,c+=(t-c)/f,v+=(u-v)/f,g+=(r*u-g)/f,h+=(t*e-h)/f,l+=(u*e-l)/f,n||(r<s&&(s=r),r>d&&(d=r))});var p=i(v/c,h/c,l/c,g/c),M=p[0],y=p[1];M=Math.exp(M);var b=function(n){return M*Math.exp(y*n)},w=a(s,d,b);return w.a=M,w.b=y,w.predict=b,w.rSquared=e(o,r,u,c,b),w};return o.domain=function(r){return arguments.length?(n=r,o):n},o.x=function(n){return arguments.length?(r=n,o):r},o.y=function(n){return arguments.length?(u=n,o):u},o}function c(){var n,r=function(n){return n[0]},u=function(n){return n[1]},o=function(o){var a=0,f=0,c=0,h=0,v=0,l=n?+n[0]:1/0,g=n?+n[1]:-1/0;t(o,r,u,function(r,t){++a,f+=(r-f)/a,c+=(t-c)/a,h+=(r*t-h)/a,v+=(r*r-v)/a,n||(r<l&&(l=r),r>g&&(g=r))});var s=i(f,c,h,v),d=s[0],p=s[1],M=function(n){return p*n+d},y=[[l,M(l)],[g,M(g)]];return y.a=p,y.b=d,y.predict=M,y.rSquared=e(o,r,u,c,M),y};return o.domain=function(r){return arguments.length?(n=r,o):n},o.x=function(n){return arguments.length?(r=n,o):r},o.y=function(n){return arguments.length?(u=n,o):u},o}function h(n){n.sort(function(n,r){return n-r});var r=n.length/2;return r%1==0?(n[r-1]+n[r])/2:n[Math.floor(r)]}function v(){var n=function(n){return n[0]},t=function(n){return n[1]},e=.3,u=function(u){for(var o=r(u,n,t,!0),a=o[0],f=o[1],c=o[2],v=o[3],d=a.length,p=Math.max(2,~~(e*d)),M=new Float64Array(d),y=new Float64Array(d),b=new Float64Array(d).fill(1),w=-1;++w<=x;){for(var F=[0,p-1],q=0;q<d;++q){for(var S=a[q],A=F[0],L=F[1],P=S-a[A]>a[L]-S?A:L,E=0,j=0,k=0,O=0,_=0,G=1/Math.abs(a[P]-S||1),I=A;I<=L;++I){var Q=a[I],z=f[I],B=l(Math.abs(S-Q)*G)*b[I],C=Q*B;E+=B,j+=C,k+=z*B,O+=z*C,_+=Q*C}var D=i(j/E,k/E,O/E,_/E),H=D[0],J=D[1];M[q]=H+J*S,y[q]=Math.abs(f[q]-M[q]),g(a,q+1,F)}if(w===x)break;var K=h(y);if(Math.abs(K)<m)break;for(var q=0,N=void 0,B=void 0;q<d;++q)N=y[q]/(6*K),b[q]=N>=1?m:(B=1-N*N)*B}return s(a,M,c,v)};return u.bandwidth=function(n){return arguments.length?(e=n,u):e},u.x=function(r){return arguments.length?(n=r,u):n},u.y=function(n){return arguments.length?(t=n,u):t},u}function l(n){return(n=1-n*n*n)*n*n}function g(n,r,t){var e=n[r],u=t[0],o=t[1]+1;if(!(o>=n.length))for(;r>u&&n[o]-e<=e-n[u];)t[0]=++u,t[1]=o,++o}function s(n,r,t,e){for(var u,o=n.length,a=[],i=0,f=0,c=[];i<o;++i)u=n[i]+t,c[0]===u?c[1]+=(r[i]-c[1])/++f:(f=0,c[1]+=e,c=[u,r[i]],a.push(c));return c[1]+=e,a}function d(){var n,r=function(n){return n[0]},u=function(n){return n[1]},o=Math.E,f=function(f){var c=0,h=0,v=0,l=0,g=0,s=n?+n[0]:1/0,d=n?+n[1]:-1/0,p=Math.log(o);t(f,r,u,function(r,t){var e=Math.log(r)/p;++c,h+=(e-h)/c,v+=(t-v)/c,l+=(e*t-l)/c,g+=(e*e-g)/c,n||(r<s&&(s=r),r>d&&(d=r))});var M=i(h,v,l,g),y=M[0],b=M[1],w=function(n){return b*Math.log(n)/p+y},x=a(s,d,w);return x.a=b,x.b=y,x.predict=w,x.rSquared=e(f,r,u,v,w),x};return f.domain=function(r){return arguments.length?(n=r,f):n},f.x=function(n){return arguments.length?(r=n,f):r},f.y=function(n){return arguments.length?(u=n,f):u},f.base=function(n){return arguments.length?(o=n,f):o},f}function p(){var n,u=function(n){return n[0]},o=function(n){return n[1]},i=function(i){var f,c,h,v,l=r(i,u,o),g=l[0],s=l[1],d=l[2],p=l[3],M=g.length,y=0,b=0,w=0,x=0,m=0;for(f=0;f<M;)c=g[f],h=s[f++],v=c*c,y+=(v-y)/f,b+=(v*c-b)/f,w+=(v*v-w)/f,x+=(c*h-x)/f,m+=(v*h-m)/f;var F=0,q=0,S=n?+n[0]:1/0,A=n?+n[1]:-1/0;t(i,u,o,function(r,t){q++,F+=(t-F)/q,n||(r<S&&(S=r),r>A&&(A=r))});var L=w-y*y,P=y*L-b*b,E=(m*y-x*b)/P,j=(x*L-m*b)/P,k=-E*y,O=function(n){var r=n-d;return E*r*r+j*r+k+p},_=a(S,A,O);return _.a=E,_.b=j-2*E*d,_.c=k-j*d+E*d*d+p,_.predict=O,_.rSquared=e(i,u,o,F,O),_};return i.domain=function(r){return arguments.length?(n=r,i):n},i.x=function(n){return arguments.length?(u=n,i):u},i.y=function(n){return arguments.length?(o=n,i):o},i}function M(){var n,u=function(n){return n[0]},o=function(n){return n[1]},i=3,f=function(f){if(1===i){var h=c().x(u).y(o).domain(n)(f),v=[h[0],h[1]];return v.coefficients=[h.b,h.a],v.predict=h.predict,v.rSquared=h.rSquared,v}if(2===i){var h=p().x(u).y(o).domain(n)(f),v=[h[0],h[1]];return v.coefficients=[h.c,h.b,h.a],v.predict=h.predict,v.rSquared=h.rSquared,v}var l=r(f,u,o),g=l[0],s=l[1],d=l[2],M=l[3],w=g.length,x=i+1,m=[],F=[],q=0,S=0,A=n?+n[0]:1/0,L=n?+n[1]:-1/0;t(f,u,o,function(r,t){S++,q+=(t-q)/S,n||(r<A&&(A=r),r>L&&(L=r))});for(var P=0;P<x;P++){for(var E=0,j=0;j<w;j++)E+=Math.pow(g[j],P)*s[j];m.push(E);for(var k=new Float64Array(x),O=0;O<x;O++){for(var _=0,j=0;j<w;j++)_+=Math.pow(g[j],P+O);k[O]=_}F.push(k)}F.push(new Float64Array(m));var G=b(F),I=function(n){for(var r=n-d,t=M+G[0],e=1;e<x;e++)t+=G[e]*Math.pow(r,e);return t},Q=a(A,L,I);return Q.coefficients=y(x,G,-d,M),Q.predict=I,Q.rSquared=e(f,u,o,q,I),Q};return f.domain=function(r){return arguments.length?(n=r,f):n},f.x=function(n){return arguments.length?(u=n,f):u},f.y=function(n){return arguments.length?(o=n,f):o},f.order=function(n){return arguments.length?(i=n,f):i},f}function y(n,r,t,e){for(var u=new Array(n).fill(0),o=n-1;o>=0;--o){var a=r[o];u[o]+=a;for(var i=1,f=1;f<=o;++f)i*=(o+1-f)/f,u[o-f]+=a*Math.pow(t,f)*i}return u[0]+=e,u}function b(n){for(var r=n.length-1,t=new Array(r),e=0;e<r;e++){for(var u=e,o=e+1;o<r;o++)Math.abs(n[e][o])>Math.abs(n[e][u])&&(u=o);for(var a=e;a<r+1;a++){var i=n[a][e];n[a][e]=n[a][u],n[a][u]=i}for(var o=e+1;o<r;o++)for(var a=r;a>=e;a--)n[a][o]-=n[a][e]*n[e][o]/n[e][e]}for(var o=r-1;o>=0;o--){for(var i=0,a=o+1;a<r;a++)i+=n[a][o]*t[a];t[o]=(n[r][o]-i)/n[o][o]}return t}function w(){var n,r=function(n){return n[0]},u=function(n){return n[1]},o=function(o){var f=0,c=0,h=0,v=0,l=0,g=0,s=n?+n[0]:1/0,d=n?+n[1]:-1/0;t(o,r,u,function(r,t){var e=Math.log(r),u=Math.log(t);++f,c+=(e-c)/f,h+=(u-h)/f,v+=(e*u-v)/f,l+=(e*e-l)/f,g+=(t-g)/f,n||(r<s&&(s=r),r>d&&(d=r))});var p=i(c,h,v,l),M=p[0],y=p[1];M=Math.exp(M);var b=function(n){return M*Math.pow(n,y)},w=a(s,d,b);return w.a=M,w.b=y,w.predict=b,w.rSquared=e(o,r,u,g,b),w};return o.domain=function(r){return arguments.length?(n=r,o):n},o.x=function(n){return arguments.length?(r=n,o):r},o.y=function(n){return arguments.length?(u=n,o):u},o}var x=2,m=1e-12;n.regressionExp=f,n.regressionLinear=c,n.regressionLoess=v,n.regressionLog=d,n.regressionPoly=M,n.regressionPow=w,n.regressionQuad=p,Object.defineProperty(n,"__esModule",{value:!0})});